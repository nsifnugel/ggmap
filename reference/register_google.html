<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This page contains documentation for tools related to enabling Google
services in R. See the Details section of this file for background
information."><title>Register a Google API — register_google • ggmap</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.8/font.css" rel="stylesheet"><link href="../deps/Courier_Prime-0.4.8/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Register a Google API — register_google"><meta property="og:description" content="This page contains documentation for tools related to enabling Google
services in R. See the Details section of this file for background
information."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Example_Analysis.html">Example Analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jhu-statprogramming-fall-2023/biostat777-project3-part1-nsifnugel/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Register a Google API</h1>
      <small class="dont-index">Source: <a href="https://github.com/jhu-statprogramming-fall-2023/biostat777-project3-part1-nsifnugel/blob/HEAD/R/register_google.R" class="external-link"><code>R/register_google.R</code></a></small>
      <div class="d-none name"><code>register_google.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This page contains documentation for tools related to enabling Google
services in R. See the Details section of this file for background
information.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">showing_key</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggmap_show_api_key</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggmap_hide_api_key</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">scrub_key</span><span class="op">(</span><span class="va">string</span>, with <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">register_google</span><span class="op">(</span></span>
<span>  <span class="va">key</span>,</span>
<span>  <span class="va">account_type</span>,</span>
<span>  <span class="va">client</span>,</span>
<span>  <span class="va">signature</span>,</span>
<span>  <span class="va">second_limit</span>,</span>
<span>  <span class="va">day_limit</span>,</span>
<span>  write <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for google_credentials</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_key</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_google_key</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_google_account</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_account</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_client</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_google_client</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_signature</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_google_signature</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_second_limit</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">google_day_limit</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>string</dt>
<dd><p>a url string to be scrubbed. currently key, signature, and
client keywords are scrubbed from the url and replace with the with
argument</p></dd>


<dt>with</dt>
<dd><p>a string to replace</p></dd>


<dt>key</dt>
<dd><p>an api key</p></dd>


<dt>account_type</dt>
<dd><p><code>"standard"</code> or <code>"premium"</code></p></dd>


<dt>client</dt>
<dd><p>client code</p></dd>


<dt>signature</dt>
<dd><p>signature code</p></dd>


<dt>second_limit</dt>
<dd><p>query limit per second (default 50)</p></dd>


<dt>day_limit</dt>
<dd><p>query limit per day (default 2500 for standard accounts,
100000 for premium accounts)</p></dd>


<dt>write</dt>
<dd><p>if TRUE, stores the secrets provided in the .Renviron file</p></dd>


<dt>x</dt>
<dd><p>a google credentials class object</p></dd>


<dt>...</dt>
<dd><p>a dumped formal argument to the generic print method</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>As of mid-2018, the Google Maps Platform requires a registered API key. While
this alleviates previous burdens (e.g. query limits), it creates some
challenges as well. The most immediate challenge for most R users is that
ggmap functions that use Google's services no longer function out of the box,
since the user has to setup an account with Google, enable the relevant APIs,
and then tell R about the user's setup.</p>
<p>To obtain an API key and enable services, go to
<a href="https://mapsplatform.google.com/" class="external-link">https://mapsplatform.google.com/</a>. This documentation shows you
how to input the requisite information (e.g. your API key) into R, and it
also shows you a few tools that can help you work with the credentialing.</p>
<p>To tell ggmap about your API key, use <code>register_google()</code>, e.g.
<code>register_google(key = "mQkzTpiaLYjPqXQBotesgif3EfGL2dbrNVOrogg")</code> (that's a
fake key). This will set your API key for the current session, but if you
restart R, you'll need to do it again. You can set it permanently by setting
<code>write = TRUE</code>, see the examples. If you set it permanently it will be stored
in your .Renviron file, and that will be accessed by ggmap persistently
across sessions.</p>
<p>Users should be aware that the API key, a string of jarbled
characters/numbers/symbols, is a PRIVATE key - it uniquely identifies and
authenticates you to Google's services. If anyone gets your API key, they can
use it to masquerade as you to Google and potentially use services that you
have enabled. Since Google requires a valid credit card to use its online
cloud services, this also means that anyone who obtains your key can
potentially make charges to your card in the form of Google services. So be
sure to not share your API key. To mitigate against users inadvertently
sharing their keys, by default ggmap never displays a user's key in messages
displayed to the console.</p>
<p>Users should also be aware that ggmap has no mechanism with which to
safeguard the private key once registered with R. That is to say, once you
register your API key, any function R will have access to it. As a
consequence, ggmap will not know if another function, potentially from a
compromised package, accesses the key and uploads it to a third party. For
this reason, when using ggmap we recommend a heightened sense of security and
self-awareness: only use trusted packages, do not save API keys in script
files, routinely cycle keys (regenerate new keys and retire old ones), etc.
Google offers features to help in securing your API key, including things
like limiting queries using that key to a particular IP address, as well as
guidance on security best practices. See
<a href="https://cloud.google.com/docs/authentication/api-keys#securing_an_api_key" class="external-link">https://cloud.google.com/docs/authentication/api-keys#securing_an_api_key</a>
for details.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://mapsplatform.google.com/" class="external-link">https://mapsplatform.google.com/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/get-api-key/" class="external-link">https://developers.google.com/maps/documentation/maps-static/get-api-key/</a>,
<a href="https://developers.google.com/maps/documentation/maps-static/usage-and-billing/" class="external-link">https://developers.google.com/maps/documentation/maps-static/usage-and-billing/</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Kahle <a href="mailto:david@kahle.io">david@kahle.io</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># this sets your google map for this session</span></span></span>
<span class="r-in"><span><span class="co"># register_google(key = "[your key]")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># this sets your google map permanently</span></span></span>
<span class="r-in"><span><span class="co"># register_google(key = "[your key]", write = TRUE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">has_google_key</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu">google_key</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span><span class="fu">has_google_client</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu">has_google_signature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="geocode.html">geocode</a></span><span class="op">(</span><span class="st">"waco, texas"</span>, urlonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://maps.googleapis.com/maps/api/geocode/json?address=waco,+texas"</span>
<span class="r-in"><span><span class="fu">ggmap_show_api_key</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> ggmap will now display PRIVATE api keys in the console.</span>
<span class="r-in"><span><span class="fu"><a href="geocode.html">geocode</a></span><span class="op">(</span><span class="st">"waco, texas"</span>, urlonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://maps.googleapis.com/maps/api/geocode/json?address=waco,+texas"</span>
<span class="r-in"><span><span class="fu">ggmap_hide_api_key</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> ggmap will now suppress private api keys in the console.</span>
<span class="r-in"><span><span class="fu"><a href="geocode.html">geocode</a></span><span class="op">(</span><span class="st">"waco, texas"</span>, urlonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://maps.googleapis.com/maps/api/geocode/json?address=waco,+texas"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">scrub_key</span><span class="op">(</span><span class="st">"key=d_5iD"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "key=xxx"</span>
<span class="r-in"><span><span class="fu">scrub_key</span><span class="op">(</span><span class="st">"key=d_5iD"</span>, <span class="st">"[your \\1]"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "key=[your key]"</span>
<span class="r-in"><span><span class="fu">scrub_key</span><span class="op">(</span><span class="st">"signature=d_5iD"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "signature=xxx"</span>
<span class="r-in"><span><span class="fu">scrub_key</span><span class="op">(</span><span class="st">"client=a_5sS&amp;signature=d_5iD"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "client=xxx&amp;signature=xxx"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Website Developed by Natalia Sifnugel</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

